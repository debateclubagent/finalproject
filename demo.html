<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>å¤šè§’è‰²æ€ç»´æ•™ç»ƒ Demo</title>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true });
  </script>
  <style>
    body { font-family: sans-serif; display: flex; gap: 2rem; padding: 2rem; }
    .card { border: 1px solid #ccc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; width: 300px; }
    .btn { margin-right: 0.5rem; cursor: pointer; }
    #cards { flex: 1; }
    #diagram { flex: 2; }
  </style>
</head>
<body>
  <div id="cards">
    <h3>è§‚ç‚¹å¡ç‰‡</h3>
    <div class="card" data-role="æ”¯æŒè€…">
      <strong>ğŸ© æ”¯æŒè€…</strong> (æ”¯æŒ)<br />
      <p>ä½ æœ‰äººè„‰ï¼Œæœºä¼šçª—å£æ­£å¥½</p>
      <button class="btn" onclick="updateStatus('æ”¯æŒè€…', 'åŒæ„')">âœ”ï¸ åŒæ„</button>
      <button class="btn" onclick="updateStatus('æ”¯æŒè€…', 'å¦å®š')">âŒ å¦å®š</button>
    </div>
    <div class="card" data-role="é£é™©é¡¾é—®">
      <strong>ğŸ•¶ï¸ é£é™©é¡¾é—®</strong> (åå¯¹)<br />
      <p>èµ„é‡‘å‡†å¤‡ä¸è¶³ï¼Œå®¶åº­å‹åŠ›å¤§</p>
      <button class="btn" onclick="updateStatus('é£é™©é¡¾é—®', 'åŒæ„')">âœ”ï¸ åŒæ„</button>
      <button class="btn" onclick="updateStatus('é£é™©é¡¾é—®', 'å¦å®š')">âŒ å¦å®š</button>
    </div>
    <div class="card" data-role="ä¸­ç«‹åˆ†æè€…">
      <strong>ğŸ¤¹â€â™€ï¸ ä¸­ç«‹åˆ†æè€…</strong> (ä¸­ç«‹)<br />
      <p>å¯å°è¯•å‰¯ä¸šè¯•æ°´ï¼Œé™ä½é£é™©</p>
      <button class="btn" onclick="updateStatus('ä¸­ç«‹åˆ†æè€…', 'åŒæ„')">âœ”ï¸ åŒæ„</button>
      <button class="btn" onclick="updateStatus('ä¸­ç«‹åˆ†æè€…', 'å¦å®š')">âŒ å¦å®š</button>
    </div>
  </div>
  <div id="diagram">
    <h3>æ€ç»´è„‰ç»œæ ‘</h3>
    <div class="mermaid" id="mermaidGraph">
      graph TD
      Q[æ˜¯å¦è¾èŒåˆ›ä¸šï¼Ÿ] --> A[æ”¯æŒè€…]
      Q --> B[é£é™©é¡¾é—®]
      Q --> C[ä¸­ç«‹åˆ†æè€…]
    </div>
  </div>
  <script>
    const statuses = {
      "æ”¯æŒè€…": "",
      "é£é™©é¡¾é—®": "",
      "ä¸­ç«‹åˆ†æè€…": ""
    };

    function updateStatus(role, status) {
      statuses[role] = status;
      renderMermaid();
    }

    function renderMermaid() {
      let diagram = "graph TD\n";
      diagram += "Q[æ˜¯å¦è¾èŒåˆ›ä¸šï¼Ÿ]";
      Object.keys(statuses).forEach(role => {
        const status = statuses[role];
        let style = "";
        if (status === "åŒæ„") {
          style = ":::agree";
        } else if (status === "å¦å®š") {
          style = ":::deny";
        }
        diagram += `\nQ --> ${role}[${role}]${style}`;
      });

      document.getElementById("mermaidGraph").innerHTML = diagram;
      mermaid.run();
    }
  </script>
  <style>
    .mermaid .agree rect { stroke: green; stroke-width: 2px; fill: #eaffea; }
    .mermaid .deny rect { stroke: red; stroke-width: 2px; fill: #ffeaea; }
  </style>
</body>
</html>
